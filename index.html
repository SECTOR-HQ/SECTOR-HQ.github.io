<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECTOR War Status</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="planetPositionsChart" width="600" height="400"></canvas>
    <script>
        // Fetch war status and war info data
        Promise.all([
            fetch('https://raw.githubusercontent.com/SECTOR-HQ/SECTOR-DATA/main/data/warStatus.json').then(response => response.json()),
            fetch('https://raw.githubusercontent.com/SECTOR-HQ/SECTOR-DATA/main/data/warInfo.json').then(response => response.json())
        ]).then(([warStatus, warInfo]) => {
            const planetsWithPlayers = warStatus.planetStatus.filter(planet => planet.players > 0);
            const planetIndicesWithPlayers = new Set(planetsWithPlayers.map(p => p.index));

            const planetPositions = warInfo.planetInfos
                .filter(planet => planetIndicesWithPlayers.has(planet.index))
                .map(planet => ({ x: planet.position.x, y: planet.position.y }));

            var ctx = document.getElementById('planetPositionsChart').getContext('2d');
            var chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Planets with Players',
                        data: planetPositions,
                        backgroundColor: 'rgb(255, 99, 132)'
                    }]
                },
                options: {
                    scales: {
                        x: {type: 'linear', position: 'bottom'},
                        y: {type: 'linear', position: 'left'}
                    }
                }
            });
        }).catch(error => console.error('Error loading data:', error));
    </script>
</body>
</html>
