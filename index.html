<!DOCTYPE html>
<html>
<head>
    <title>Planets and Sectors Visualization with D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .planet {
            fill-opacity: 0.7;
            stroke: #fff;
            stroke-width: 1.5px;
        }
        .sector {
            fill-opacity: 0.2;
            stroke: #000;
            stroke-width: 1;
        }
    </style>
</head>
<body>
    <svg width="800" height="600"></svg>
    <script>
        Promise.all([
            fetch('https://raw.githubusercontent.com/SECTOR-HQ/SECTOR-DATA/main/data/warStatus.json').then(res => res.json()),
            fetch('https://raw.githubusercontent.com/SECTOR-HQ/SECTOR-DATA/main/data/warInfo.json').then(res => res.json())
        ]).then(([warStatus, warInfo]) => {
            const planetsWithPlayers = warStatus.planetStatus.reduce((acc, planet) => {
                acc[planet.index] = planet.players;
                return acc;
            }, {});

            const sectorColors = d3.scaleOrdinal(d3.schemeCategory10); // For unique sector colors

            const planetPositions = warInfo.planetInfos.map(planet => {
                const players = planetsWithPlayers[planet.index] || 0;
                return {
                    x: planet.position.x * 1000 + 400, // Scale and translate for visibility
                    y: planet.position.y * 1000 + 300,
                    r: 3 + players / 100, // Example scaling of radius based on players
                    players: players,
                    sector: planet.sector,
                    backgroundColor: players > 0 ? 'rgba(0, 191, 255, 0.7)' : 'rgba(255, 99, 132, 0.7)'
                };
            });

            renderVisualization(planetPositions, sectorColors);
        });

        function renderVisualization(planets, sectorColors) {
            const svg = d3.select('svg');

            // Draw sector backgrounds
            planets.forEach(d => {
                svg.append('circle')
                    .attr('cx', d.x)
                    .attr('cy', d.y)
                    .attr('r', 20) // Example static radius for sector background
                    .attr('fill', sectorColors(d.sector))
                    .attr('class', 'sector');
            });

            // Draw planets
            planets.forEach(d => {
                svg.append('circle')
                    .attr('cx', d.x)
                    .attr('cy', d.y)
                    .attr('r', d.r)
                    .attr('fill', d.backgroundColor)
                    .attr('class', 'planet');
            });
        }
    </script>
</body>
</html>
